{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Mr.X\\\\Desktop\\\\nextjs-sequelize\\\\pages\\\\user.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\n/* components */\nimport Layout from '../components/layout/Layout';\nimport UserNav from '../components/navigation/User';\n\nfunction User(props) {\n  _s();\n\n  var router = useRouter();\n  var origin = props.origin,\n      user = props.user,\n      users = props.users;\n\n  function renderUsers(users) {\n    var _this = this;\n\n    return users.data.map(function (user, i) {\n      return __jsx(Link, {\n        key: i,\n        href: \"/user/[slug]\",\n        as: \"/user/\".concat(user.id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        className: \"card\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }\n      }, __jsx(\"h3\", {\n        className: \"headline\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }, user.username), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 13\n        }\n      }, user.email), __jsx(\"small\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 13\n        }\n      }, \"Posts: \", user.posts.length), ' ', __jsx(\"small\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 13\n        }\n      }, \"Jobs: \", user.jobs.length)));\n    });\n  }\n\n  function loadMoreClick(_x) {\n    return _loadMoreClick.apply(this, arguments);\n  }\n\n  function _loadMoreClick() {\n    _loadMoreClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Router.push({\n                pathname: '/user',\n                query: {\n                  nextPage: users.nextPage ? users.nextPage : 5\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadMoreClick.apply(this, arguments);\n  }\n\n  return __jsx(Layout, {\n    title: \"Next.js with Sequelize | User Page\",\n    url: \"\".concat(origin).concat(router.asPath),\n    origin: origin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(UserNav, {\n    props: {\n      user: user\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: {\n      pathname: '/'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, \"\\u2190 \")), \"Recent Users\"), __jsx(\"div\", {\n    className: \"grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, users.status === 'success' ? users.data.length && renderUsers(users) : __jsx(\"h3\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem',\n      display: 'inline-block',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, users.error)))));\n}\n/* getServerSideProps */\n\n\n_s(User, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c = User;\nexport var __N_SSP = true;\nexport default User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["C:/Users/Mr.X/Desktop/nextjs-sequelize/pages/user.js"],"names":["React","Link","Router","useRouter","Layout","UserNav","User","props","router","origin","user","users","renderUsers","data","map","i","id","username","email","posts","length","jobs","loadMoreClick","e","push","pathname","query","nextPage","asPath","status","textAlign","marginTop","marginBottom","display","width","error"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport Link from 'next/link';\r\nimport Router, { useRouter } from 'next/router';\r\n\r\n/* utils */\r\nimport { absoluteUrl } from '../middleware/utils';\r\n\r\n/* components */\r\nimport Layout from '../components/layout/Layout';\r\nimport UserNav from '../components/navigation/User';\r\n\r\nfunction User(props) {\r\n  const router = useRouter();\r\n  const { origin, user, users } = props;\r\n\r\n  function renderUsers(users) {\r\n    return users.data.map((user, i) => {\r\n      return (\r\n        <Link key={i} href=\"/user/[slug]\" as={`/user/${user.id}`}>\r\n          <a className=\"card\">\r\n            <h3 className=\"headline\">\r\n              {/* {user.firstName} {user.lastName} */}\r\n              {user.username}\r\n            </h3>\r\n            <p>{user.email}</p>\r\n            <small>Posts: {user.posts.length}</small>{' '}\r\n            <small>Jobs: {user.jobs.length}</small>\r\n          </a>\r\n        </Link>\r\n      );\r\n    });\r\n  }\r\n\r\n  async function loadMoreClick(e) {\r\n    await Router.push({\r\n      pathname: '/user',\r\n      query: {\r\n        nextPage: users.nextPage ? users.nextPage : 5,\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Next.js with Sequelize | User Page\"\r\n      url={`${origin}${router.asPath}`}\r\n      origin={origin}\r\n    >\r\n      <div className=\"container\">\r\n        <main>\r\n          <UserNav props={{ user: user }} />\r\n          <h2>\r\n            <Link\r\n              href={{\r\n                pathname: '/',\r\n              }}\r\n            >\r\n              <a>&larr; </a>\r\n            </Link>\r\n            Recent Users\r\n          </h2>\r\n          <div className=\"grid\">\r\n            {users.status === 'success' ? (\r\n              users.data.length && renderUsers(users)\r\n            ) : (\r\n              <h3\r\n                style={{\r\n                  textAlign: 'center',\r\n                  marginTop: '0rem',\r\n                  marginBottom: '1rem',\r\n                  display: 'inline-block',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                {users.error}\r\n              </h3>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { query, req } = context;\r\n  const { nextPage } = query;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  const referer = req.headers.referer || '';\r\n\r\n  const nextPageUrl = !isNaN(nextPage) ? `?nextPage=${nextPage}` : '';\r\n  const baseApiUrl = `${origin}/api`;\r\n\r\n  const usersApi = await fetch(`${baseApiUrl}/user${nextPageUrl}`);\r\n  const users = await usersApi.json();\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n      referer,\r\n      users,\r\n    },\r\n  };\r\n}\r\n\r\nexport default User;\r\n"]},"metadata":{},"sourceType":"module"}