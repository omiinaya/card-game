{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mr.X\\\\Desktop\\\\nextjs-sequelize\\\\pages\\\\job.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\nimport { absoluteUrl, getAppCookies } from '../middleware/utils';\n/* components */\n\nimport Layout from '../components/layout/Layout';\nimport UserNav from '../components/navigation/User';\n\nfunction Job(props) {\n  const router = useRouter();\n  const {\n    origin,\n    user,\n    jobs\n  } = props;\n\n  function renderJobs() {\n    return jobs.data.map((job, j) => {\n      return __jsx(Link, {\n        key: j,\n        href: \"/job/[slug]\",\n        as: `/job/${job.slug}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 11\n        }\n      }, __jsx(\"h3\", {\n        className: \"headline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 13\n        }\n      }, job.title), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }, __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 15\n        }\n      }, \"Posted: \", job.createdAt), __jsx(\"small\", {\n        style: {\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 15\n        }\n      }, \"Job by: \", job.user.firstName || '', \" \", job.user.lastName || '')), __jsx(\"small\", {\n        style: {\n          display: 'block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 13\n        }\n      }, \"Email: \", job.emailTo), __jsx(\"small\", {\n        style: {\n          display: 'block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 13\n        }\n      }, \"Report to: \", job.reportManager), __jsx(\"small\", {\n        style: {\n          display: 'block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }\n      }, \"Limit :\", job.dateLimit)));\n    });\n  }\n\n  async function loadMoreClick(e) {\n    await Router.push({\n      pathname: '/job',\n      query: {\n        nextPage: jobs.nextPage ? jobs.nextPage : 5\n      }\n    });\n  }\n\n  return __jsx(Layout, {\n    title: \"Next.js with Sequelize | Job Page\",\n    url: `${origin}${router.asPath}`,\n    origin: origin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"Sequelize & \", __jsx(\"a\", {\n    href: \"https://nextjs.org\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }, \"Next.js!\")), __jsx(\"p\", {\n    className: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: \"/sequelize.svg\",\n    alt: \"Sequelize\",\n    height: \"120\",\n    style: {\n      marginRight: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), __jsx(\"img\", {\n    src: \"/nextjs.svg\",\n    alt: \"Next.js\",\n    width: \"160\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  })), __jsx(UserNav, {\n    props: {\n      user: user\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: {\n      pathname: '/'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, \"\\u2190 \")), \"Latest Jobs\"), __jsx(\"div\", {\n    className: \"grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, __jsx(\"small\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, __jsx(Link, {\n    href: \"/job/add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \"+ Add Job\"))), jobs.status === 'success' ? jobs.data.length && renderJobs() : __jsx(\"h3\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem',\n      display: 'inline-block',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, jobs.error), jobs.status === 'success' && __jsx(React.Fragment, null, jobs.nextPage < jobs.total && jobs.data.length !== jobs.total ? __jsx(\"button\", {\n    onClick: loadMoreClick,\n    className: \"jsx-2614092801\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"Next\") : __jsx(\"span\", {\n    className: \"jsx-2614092801\" + \" \" + \"span-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, \"no page left\"), __jsx(_JSXStyle, {\n    id: \"2614092801\",\n    __self: this\n  }, \"button.jsx-2614092801,.span-info.jsx-2614092801{margin:1rem auto;padding:0.5rem 1rem;border:1px solid #cecece;background-color:#fffcfc;color:#7b7b7b;outline:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTXIuWFxcRGVza3RvcFxcbmV4dGpzLXNlcXVlbGl6ZVxccGFnZXNcXGpvYi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvSG1CLEFBSXdDLGlCQUNHLG9CQUNLLHlCQUNBLHlCQUNYLGNBQ0QsYUFDZiIsImZpbGUiOiJDOlxcVXNlcnNcXE1yLlhcXERlc2t0b3BcXG5leHRqcy1zZXF1ZWxpemVcXHBhZ2VzXFxqb2IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xyXG5pbXBvcnQgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcclxuXHJcbi8qIHV0aWxzICovXHJcbmltcG9ydCB7IGFic29sdXRlVXJsLCBnZXRBcHBDb29raWVzIH0gZnJvbSAnLi4vbWlkZGxld2FyZS91dGlscyc7XHJcblxyXG4vKiBjb21wb25lbnRzICovXHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9sYXlvdXQvTGF5b3V0JztcclxuaW1wb3J0IFVzZXJOYXYgZnJvbSAnLi4vY29tcG9uZW50cy9uYXZpZ2F0aW9uL1VzZXInO1xyXG5cclxuZnVuY3Rpb24gSm9iKHByb3BzKSB7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgY29uc3QgeyBvcmlnaW4sIHVzZXIsIGpvYnMgfSA9IHByb3BzO1xyXG5cclxuICBmdW5jdGlvbiByZW5kZXJKb2JzKCkge1xyXG4gICAgcmV0dXJuIGpvYnMuZGF0YS5tYXAoKGpvYiwgaikgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxMaW5rIGtleT17an0gaHJlZj1cIi9qb2IvW3NsdWddXCIgYXM9e2Avam9iLyR7am9iLnNsdWd9YH0+XHJcbiAgICAgICAgICA8YSBjbGFzc05hbWU9XCJjYXJkXCI+XHJcbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJoZWFkbGluZVwiPntqb2IudGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8c21hbGw+UG9zdGVkOiB7am9iLmNyZWF0ZWRBdH08L3NtYWxsPlxyXG4gICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT17eyBmbG9hdDogJ3JpZ2h0JyB9fT5cclxuICAgICAgICAgICAgICAgIEpvYiBieToge2pvYi51c2VyLmZpcnN0TmFtZSB8fCAnJ30ge2pvYi51c2VyLmxhc3ROYW1lIHx8ICcnfVxyXG4gICAgICAgICAgICAgIDwvc21hbGw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICB7LyogPHAgY2xhc3NOYW1lPVwiZGVzY3JpcHRpb25cIj57am9iLmNvbnRlbnR9PC9wPiAqL31cclxuICAgICAgICAgICAgPHNtYWxsIHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycgfX0+RW1haWw6IHtqb2IuZW1haWxUb308L3NtYWxsPlxyXG4gICAgICAgICAgICA8c21hbGwgc3R5bGU9e3sgZGlzcGxheTogJ2Jsb2NrJyB9fT5cclxuICAgICAgICAgICAgICBSZXBvcnQgdG86IHtqb2IucmVwb3J0TWFuYWdlcn1cclxuICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAgPHNtYWxsIHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycgfX0+TGltaXQgOntqb2IuZGF0ZUxpbWl0fTwvc21hbGw+XHJcbiAgICAgICAgICA8L2E+XHJcbiAgICAgICAgPC9MaW5rPlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBsb2FkTW9yZUNsaWNrKGUpIHtcclxuICAgIGF3YWl0IFJvdXRlci5wdXNoKHtcclxuICAgICAgcGF0aG5hbWU6ICcvam9iJyxcclxuICAgICAgcXVlcnk6IHtcclxuICAgICAgICBuZXh0UGFnZTogam9icy5uZXh0UGFnZSA/IGpvYnMubmV4dFBhZ2UgOiA1LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPExheW91dFxyXG4gICAgICB0aXRsZT1cIk5leHQuanMgd2l0aCBTZXF1ZWxpemUgfCBKb2IgUGFnZVwiXHJcbiAgICAgIHVybD17YCR7b3JpZ2lufSR7cm91dGVyLmFzUGF0aH1gfVxyXG4gICAgICBvcmlnaW49e29yaWdpbn1cclxuICAgID5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICA8bWFpbj5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICBTZXF1ZWxpemUgJmFtcDsgPGEgaHJlZj1cImh0dHBzOi8vbmV4dGpzLm9yZ1wiPk5leHQuanMhPC9hPlxyXG4gICAgICAgICAgPC9oMT5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImRlc2NyaXB0aW9uXCI+XHJcbiAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICBzcmM9XCIvc2VxdWVsaXplLnN2Z1wiXHJcbiAgICAgICAgICAgICAgYWx0PVwiU2VxdWVsaXplXCJcclxuICAgICAgICAgICAgICBoZWlnaHQ9XCIxMjBcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMXJlbScgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPGltZyBzcmM9XCIvbmV4dGpzLnN2Z1wiIGFsdD1cIk5leHQuanNcIiB3aWR0aD1cIjE2MFwiIC8+XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8VXNlck5hdiBwcm9wcz17eyB1c2VyOiB1c2VyIH19IC8+XHJcbiAgICAgICAgICA8aDI+XHJcbiAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgaHJlZj17e1xyXG4gICAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvJyxcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPGE+JmxhcnI7IDwvYT5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICBMYXRlc3QgSm9ic1xyXG4gICAgICAgICAgPC9oMj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZFwiPlxyXG4gICAgICAgICAgICA8c21hbGxcclxuICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzByZW0nLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnMXJlbScsXHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvam9iL2FkZFwiPlxyXG4gICAgICAgICAgICAgICAgPGE+KyBBZGQgSm9iPC9hPlxyXG4gICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAge2pvYnMuc3RhdHVzID09PSAnc3VjY2VzcycgPyAoXHJcbiAgICAgICAgICAgICAgam9icy5kYXRhLmxlbmd0aCAmJiByZW5kZXJKb2JzKClcclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICA8aDNcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzByZW0nLFxyXG4gICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcclxuICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtqb2JzLmVycm9yfVxyXG4gICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICB7am9icy5zdGF0dXMgPT09ICdzdWNjZXNzJyAmJiAoXHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIHtqb2JzLm5leHRQYWdlIDwgam9icy50b3RhbCAmJlxyXG4gICAgICAgICAgICAgICAgam9icy5kYXRhLmxlbmd0aCAhPT0gam9icy50b3RhbCA/IChcclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtsb2FkTW9yZUNsaWNrfT5OZXh0PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzcGFuLWluZm9cIj5ubyBwYWdlIGxlZnQ8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICAgICAgICAgICAge2BcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgLnNwYW4taW5mbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDFyZW0gYXV0bztcclxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NlY2VjZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZjZmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzdiN2I3YjtcclxuICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBgfVxyXG4gICAgICAgICAgICAgICAgPC9zdHlsZT5cclxuICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvbWFpbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L0xheW91dD5cclxuICApO1xyXG59XHJcblxyXG4vKiBnZXRTZXJ2ZXJTaWRlUHJvcHMgKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclNpZGVQcm9wcyhjb250ZXh0KSB7XHJcbiAgY29uc3QgeyBxdWVyeSwgcmVxIH0gPSBjb250ZXh0O1xyXG4gIGNvbnN0IHsgbmV4dFBhZ2UgfSA9IHF1ZXJ5O1xyXG4gIGNvbnN0IHsgb3JpZ2luIH0gPSBhYnNvbHV0ZVVybChyZXEpO1xyXG5cclxuICBjb25zdCB0b2tlbiA9IGdldEFwcENvb2tpZXMocmVxKS50b2tlbiB8fCAnJztcclxuICBjb25zdCByZWZlcmVyID0gcmVxLmhlYWRlcnMucmVmZXJlciB8fCAnJztcclxuXHJcbiAgY29uc3QgbmV4dFBhZ2VVcmwgPSAhaXNOYU4obmV4dFBhZ2UpID8gYD9uZXh0UGFnZT0ke25leHRQYWdlfWAgOiAnJztcclxuICBjb25zdCBiYXNlQXBpVXJsID0gYCR7b3JpZ2lufS9hcGlgO1xyXG5cclxuICBjb25zdCBqb2JzQXBpID0gYXdhaXQgZmV0Y2goYCR7YmFzZUFwaVVybH0vam9iJHtuZXh0UGFnZVVybH1gLCB7XHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246IHRva2VuIHx8ICcnLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3Qgam9icyA9IGF3YWl0IGpvYnNBcGkuanNvbigpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcHJvcHM6IHtcclxuICAgICAgb3JpZ2luLFxyXG4gICAgICByZWZlcmVyLFxyXG4gICAgICB0b2tlbixcclxuICAgICAgam9icyxcclxuICAgIH0sXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSm9iO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\Mr.X\\\\\\\\Desktop\\\\\\\\nextjs-sequelize\\\\\\\\pages\\\\\\\\job.js */\"))))));\n}\n/* getServerSideProps */\n\n\nexport async function getServerSideProps(context) {\n  const {\n    query,\n    req\n  } = context;\n  const {\n    nextPage\n  } = query;\n  const {\n    origin\n  } = absoluteUrl(req);\n  const token = getAppCookies(req).token || '';\n  const referer = req.headers.referer || '';\n  const nextPageUrl = !isNaN(nextPage) ? `?nextPage=${nextPage}` : '';\n  const baseApiUrl = `${origin}/api`;\n  const jobsApi = await fetch(`${baseApiUrl}/job${nextPageUrl}`, {\n    headers: {\n      authorization: token || ''\n    }\n  });\n  const jobs = await jobsApi.json();\n  return {\n    props: {\n      origin,\n      referer,\n      token,\n      jobs\n    }\n  };\n}\nexport default Job;","map":{"version":3,"sources":["C:/Users/Mr.X/Desktop/nextjs-sequelize/pages/job.js"],"names":["React","useEffect","Link","Router","useRouter","absoluteUrl","getAppCookies","Layout","UserNav","Job","props","router","origin","user","jobs","renderJobs","data","map","job","j","slug","title","createdAt","float","firstName","lastName","display","emailTo","reportManager","dateLimit","loadMoreClick","e","push","pathname","query","nextPage","asPath","marginRight","textAlign","marginTop","marginBottom","status","length","width","error","total","getServerSideProps","context","req","token","referer","headers","nextPageUrl","isNaN","baseApiUrl","jobsApi","fetch","authorization","json"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Router, { useRouter } from 'next/router';\r\n\r\n/* utils */\r\nimport { absoluteUrl, getAppCookies } from '../middleware/utils';\r\n\r\n/* components */\r\nimport Layout from '../components/layout/Layout';\r\nimport UserNav from '../components/navigation/User';\r\n\r\nfunction Job(props) {\r\n  const router = useRouter();\r\n  const { origin, user, jobs } = props;\r\n\r\n  function renderJobs() {\r\n    return jobs.data.map((job, j) => {\r\n      return (\r\n        <Link key={j} href=\"/job/[slug]\" as={`/job/${job.slug}`}>\r\n          <a className=\"card\">\r\n            <h3 className=\"headline\">{job.title}</h3>\r\n            <div>\r\n              <small>Posted: {job.createdAt}</small>\r\n              <small style={{ float: 'right' }}>\r\n                Job by: {job.user.firstName || ''} {job.user.lastName || ''}\r\n              </small>\r\n            </div>\r\n            {/* <p className=\"description\">{job.content}</p> */}\r\n            <small style={{ display: 'block' }}>Email: {job.emailTo}</small>\r\n            <small style={{ display: 'block' }}>\r\n              Report to: {job.reportManager}\r\n            </small>\r\n            <small style={{ display: 'block' }}>Limit :{job.dateLimit}</small>\r\n          </a>\r\n        </Link>\r\n      );\r\n    });\r\n  }\r\n\r\n  async function loadMoreClick(e) {\r\n    await Router.push({\r\n      pathname: '/job',\r\n      query: {\r\n        nextPage: jobs.nextPage ? jobs.nextPage : 5,\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Next.js with Sequelize | Job Page\"\r\n      url={`${origin}${router.asPath}`}\r\n      origin={origin}\r\n    >\r\n      <div className=\"container\">\r\n        <main>\r\n          <h1 className=\"title\">\r\n            Sequelize &amp; <a href=\"https://nextjs.org\">Next.js!</a>\r\n          </h1>\r\n          <p className=\"description\">\r\n            <img\r\n              src=\"/sequelize.svg\"\r\n              alt=\"Sequelize\"\r\n              height=\"120\"\r\n              style={{ marginRight: '1rem' }}\r\n            />\r\n            <img src=\"/nextjs.svg\" alt=\"Next.js\" width=\"160\" />\r\n          </p>\r\n          <UserNav props={{ user: user }} />\r\n          <h2>\r\n            <Link\r\n              href={{\r\n                pathname: '/',\r\n              }}\r\n            >\r\n              <a>&larr; </a>\r\n            </Link>\r\n            Latest Jobs\r\n          </h2>\r\n          <div className=\"grid\">\r\n            <small\r\n              style={{\r\n                textAlign: 'center',\r\n                marginTop: '0rem',\r\n                marginBottom: '1rem',\r\n              }}\r\n            >\r\n              <Link href=\"/job/add\">\r\n                <a>+ Add Job</a>\r\n              </Link>\r\n            </small>\r\n            {jobs.status === 'success' ? (\r\n              jobs.data.length && renderJobs()\r\n            ) : (\r\n              <h3\r\n                style={{\r\n                  textAlign: 'center',\r\n                  marginTop: '0rem',\r\n                  marginBottom: '1rem',\r\n                  display: 'inline-block',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                {jobs.error}\r\n              </h3>\r\n            )}\r\n\r\n            {jobs.status === 'success' && (\r\n              <>\r\n                {jobs.nextPage < jobs.total &&\r\n                jobs.data.length !== jobs.total ? (\r\n                  <button onClick={loadMoreClick}>Next</button>\r\n                ) : (\r\n                  <span className=\"span-info\">no page left</span>\r\n                )}\r\n                <style jsx>\r\n                  {`\r\n                    button,\r\n                    .span-info {\r\n                      margin: 1rem auto;\r\n                      padding: 0.5rem 1rem;\r\n                      border: 1px solid #cecece;\r\n                      background-color: #fffcfc;\r\n                      color: #7b7b7b;\r\n                      outline: none;\r\n                    }\r\n                  `}\r\n                </style>\r\n              </>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { query, req } = context;\r\n  const { nextPage } = query;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  const token = getAppCookies(req).token || '';\r\n  const referer = req.headers.referer || '';\r\n\r\n  const nextPageUrl = !isNaN(nextPage) ? `?nextPage=${nextPage}` : '';\r\n  const baseApiUrl = `${origin}/api`;\r\n\r\n  const jobsApi = await fetch(`${baseApiUrl}/job${nextPageUrl}`, {\r\n    headers: {\r\n      authorization: token || '',\r\n    },\r\n  });\r\n\r\n  const jobs = await jobsApi.json();\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n      referer,\r\n      token,\r\n      jobs,\r\n    },\r\n  };\r\n}\r\n\r\nexport default Job;\r\n"]},"metadata":{},"sourceType":"module"}