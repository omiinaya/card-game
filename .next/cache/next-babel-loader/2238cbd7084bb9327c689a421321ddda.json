{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../../middleware/auth';\n\nconst models = require('../../../models/index');\n\nconst handler = nextConnect() // Get method\n.get(async (req, res) => {\n  const {\n    query: {\n      nextPage\n    },\n    method,\n    body,\n    user\n  } = req;\n  const jobs = await models.jobs.findAndCountAll({\n    include: [{\n      model: models.users,\n      as: 'user'\n    }],\n    attributes: {\n      exclude: ['userId']\n    },\n    order: [// Will escape title and validate DESC against a list of valid direction parameters\n    ['id', 'DESC']],\n    offset: nextPage ? +nextPage : 0,\n    limit: 5\n  });\n  res.statusCode = 200;\n  res.json({\n    status: 'success',\n    data: jobs.rows,\n    total: jobs.count,\n    nextPage: +nextPage + 5\n  });\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/Nfernal/Desktop/nextjs-sequelize-8eb138058bc207616389312a81131e18dc89d783/pages/api/job/index.js"],"names":["nextConnect","middleware","models","require","handler","get","req","res","query","nextPage","method","body","user","jobs","findAndCountAll","include","model","users","as","attributes","exclude","order","offset","limit","statusCode","json","status","data","rows","total","count"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAAtB;;AAEA,MAAMC,OAAO,GAAGJ,WAAW,GACzB;AADyB,CAExBK,GAFa,CAET,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACvB,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF,KADH;AAEJC,IAAAA,MAFI;AAGJC,IAAAA,IAHI;AAIJC,IAAAA;AAJI,MAKFN,GALJ;AAOA,QAAMO,IAAI,GAAG,MAAMX,MAAM,CAACW,IAAP,CAAYC,eAAZ,CAA4B;AAC7CC,IAAAA,OAAO,EAAE,CACP;AACEC,MAAAA,KAAK,EAAEd,MAAM,CAACe,KADhB;AAEEC,MAAAA,EAAE,EAAE;AAFN,KADO,CADoC;AAO7CC,IAAAA,UAAU,EAAE;AACVC,MAAAA,OAAO,EAAE,CAAC,QAAD;AADC,KAPiC;AAU7CC,IAAAA,KAAK,EAAE,CACL;AACA,KAAC,IAAD,EAAO,MAAP,CAFK,CAVsC;AAc7CC,IAAAA,MAAM,EAAEb,QAAQ,GAAG,CAACA,QAAJ,GAAe,CAdc;AAe7Cc,IAAAA,KAAK,EAAE;AAfsC,GAA5B,CAAnB;AAkBAhB,EAAAA,GAAG,CAACiB,UAAJ,GAAiB,GAAjB;AACAjB,EAAAA,GAAG,CAACkB,IAAJ,CAAS;AACPC,IAAAA,MAAM,EAAE,SADD;AAEPC,IAAAA,IAAI,EAAEd,IAAI,CAACe,IAFJ;AAGPC,IAAAA,KAAK,EAAEhB,IAAI,CAACiB,KAHL;AAIPrB,IAAAA,QAAQ,EAAE,CAACA,QAAD,GAAY;AAJf,GAAT;AAMD,CAnCa,CAAhB;AAqCA,eAAeL,OAAf","sourcesContent":["import nextConnect from 'next-connect';\nimport middleware from '../../../middleware/auth';\nconst models = require('../../../models/index');\n\nconst handler = nextConnect()\n  // Get method\n  .get(async (req, res) => {\n    const {\n      query: { nextPage },\n      method,\n      body,\n      user,\n    } = req;\n\n    const jobs = await models.jobs.findAndCountAll({\n      include: [\n        {\n          model: models.users,\n          as: 'user',\n        },\n      ],\n      attributes: {\n        exclude: ['userId'],\n      },\n      order: [\n        // Will escape title and validate DESC against a list of valid direction parameters\n        ['id', 'DESC'],\n      ],\n      offset: nextPage ? +nextPage : 0,\n      limit: 5,\n    });\n\n    res.statusCode = 200;\n    res.json({\n      status: 'success',\n      data: jobs.rows,\n      total: jobs.count,\n      nextPage: +nextPage + 5,\n    });\n  });\n\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}